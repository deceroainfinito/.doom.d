#+TITLE: my-config

* Doom stuff
- Dashboard icon
#+BEGIN_SRC emacs-lisp
(setq
 +doom-dashboard-banner-file (expand-file-name "red_dice_logo.png" doom-private-dir))
#+END_SRC

- Font Management
#+BEGIN_SRC emacs-lisp
(setq
 doom-font (font-spec :family "Fira Code" :size 16)
 doom-variable-pitch-font (font-spec :family "SF Pro Display" :size 18))
#+END_SRC

- Theming
#+BEGIN_SRC emacs-lisp
(def-package! doom-themes
  :init
  (setq doom-themes-enable-bold t    ; if nil, bold is universally disabled
        doom-themes-enable-italic t) ; if nil, italics is universally disabled
  ;; Enable flashing mode-line on errors
  (doom-themes-visual-bell-config)
  ;; Enable custom neotree theme (all-the-icons must be installed!)
  (doom-themes-neotree-config)
  ;; or for treemacs users
  (doom-themes-treemacs-config)
  ;; Corrects (and improves) org-mode's native fontification.
  (doom-themes-org-config)

  :config
  (load-theme 'doom-peacock t))
#+END_SRC

* Mapping
- Font sizing
#+BEGIN_SRC emacs-lisp
(map! :ne "M-=" (λ! (text-scale-set 0))
      :ne "M-+" #'text-scale-increase
      :ne "M--" #'text-scale-decrease)
#+END_SRC

- ES keyboard symbols (\, |, @, #, ~)
#+BEGIN_SRC emacs-lisp
;; !!!! M stands for 'alt' key
(map! :g "M-º" (λ! (interactive) (insert "\\")))
(map! :ie "M-1" (λ! (interactive) (insert "|")))
(map! :ie "M-2" (λ! (interactive) (insert "@")))
(map! :ie "M-3" (λ! (interactive) (insert "#")))
(map! :ie "M-ñ" (λ! (interactive) (insert "~")))
#+END_SRC

- Projetile ag to "SPC a"
#+BEGIN_SRC emacs-lisp
(map! :leader :g "a" #'projectile-ag)
#+END_SRC

* Org stuff

- TODO keywords
#+BEGIN_SRC emacs-lisp
(after! org
  :config
  (setq org-link-frame-setup '((file . find-file-other-window)))
  (setq org-todo-keywords '((sequence "TODO(t)" "PROJ(p)")
                            (sequence "[!](i)" "[ ](E)" "[-](g)" "[?](Q)" "|" "[X](D)")
                            (sequence "NEXT(n)" "WAIT(w)" "HOLD(h)" "|" "ABRT(c)")
                            (sequence "[READY FOR REVIEW](W)"
                                      "[REVIEW FAILED](F)"
                                      "[READY FOR TESTING](T)"
                                      "[URGENT](G)"
                                      "[TESTING FAILED](A)"
                                      "[DO NOT MERGE](N)"
                                      "[READY FOR PRODUCTION](P)"
                                      "|"
                                      "[MERGED](M)"
                                      "[DONE](d)"))))


#+END_SRC

- Widen keybinding
#+BEGIN_SRC emacs-lisp
(map! :map outline-mode-map
      :n "zw" #'widen)
#+END_SRC

- super-agenda
#+BEGIN_SRC emacs-lisp
(def-package! org-super-agenda
  :after org-agenda
  ;; before the package is loaded
  :init
  (setq org-super-agenda-groups '((:name "Today"
                                         :time-grid t
                                         :scheduled today)
                                  (:name "Due today"
                                         :deadline today)
                                  (:name "Important"
                                         :priority "A")
                                  (:name "Overdue"
                                         :deadline past)
                                  (:name "Due soon"
                                         :deadline future)
                                  (:name "Big Outcomes"
                                         :tag "bo")))
  ;; after the package is loaded
  :config
  (org-super-agenda-mode))
#+END_SRC

* Other stuff

- Copy lines matching an expression
  #+BEGIN_SRC emacs-lisp
 (defun copy-lines-matching-re (re)
  "find all lines matching the regexp RE in the current buffer
putting the matching lines in a buffer named *matching*"
  (interactive "sRegexp to match: ")
  (let ((result-buffer (get-buffer-create "*matching*")))
    (with-current-buffer result-buffer
      (erase-buffer))
    (save-match-data
      (save-excursion
        (goto-char (point-min))
        (while (re-search-forward re nil t)
          (princ (buffer-substring-no-properties (line-beginning-position)
                                                 (line-beginning-position 2))
                 result-buffer))))
    (pop-to-buffer result-buffer)))
 #+END_SRC

 - Remove links, keep description
 #+BEGIN_SRC emacs-lisp
(defun afs/org-replace-link-by-link-description ()
  "Replace an org link by its description or if empty its address"
  (interactive)
  (if (org-in-regexp org-bracket-link-regexp 1)
      (let ((remove (list (match-beginning 0) (match-end 0)))
            (description (if (match-end 3)
                             (org-match-string-no-properties 3)
                           (org-match-string-no-properties 1))))
        (apply 'delete-region remove)
        (insert description))))
 #+END_SRC

 - Cursors changes
 #+BEGIN_SRC emacs-lisp
 ;; (use-package evil-terminal-cursor-changer
 ;;   :init
 ;;   (progn
 ;;     (unless (display-graphic-p)
 ;;          (require 'evil-terminal-cursor-changer)
 ;;          (evil-terminal-cursor-changer-activate) ; or (etcc-on)
 ;;          )))
 #+END_SRC
